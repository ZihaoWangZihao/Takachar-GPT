import pandas as pd
import openai
import requests
from openpyxl.reader.excel import load_workbook
import time

from api_key import *

headers = {
    'Content-Type': 'application/json',
    'Authorization': f"Bearer {api_key}"
}


def gpt(role, question):
    """
    :param role: <str> - role gpt takes on
    :param question: <str> - question you ask gpt
    :return: <str> - gpt response
    """
    data = {
        'messages': [
            {'role': 'system', 'content': role},
            {'role': 'user', 'content': question}
        ],
        'model': 'gpt-3.5-turbo', # gpt 4
        "temperature": 0.1
    }

    api_url = 'https://api.openai.com/v1/chat/completions'
    response = requests.post(api_url, headers=headers, json=data)

    if response.status_code == 200:
        response_data = response.json()
        reply = response_data['choices'][0]['message']['content']
        return reply
    else:
        message = 'Error:', response.status_code, response.text
        return message


def excel_generator(path, column_name):
    """
    Generator to yield rows one by one from an Excel file
    """
    df = pd.read_excel(path)
    for value in df[column_name]:
        yield value


file_path = "/Users/zihaowang/PycharmProjects/Takachar/Takachar-GPT/Hot_Tests.xlsx"
excel_gen = excel_generator(file_path, "Hot Test Text")

role = "You are a scientist with expertise in chemical engineering, physical experiments, and data science."

context = "These experiments are Combustion (Pyrolysis) experiments in presence of oxygen for biomass to biochar formation in a newly designed small-sized reactor." \
         "A hopper is used for inputting biomass, an auger rotates at a certain speed to carry the biomass in the reactor where it is burnt." \
         "Volatiles go from chimney above, and output biochar goes from other end of the auger." \
         "Thermocouples measure the temperature at different places. " \
         "Primary blowers provide air (hence oxygen) to reactor zone and secondary blowers remove volatiles through chimney. " \
         "The objective is to gain a complete understanding of the underlying combustion process and machine design by testing different hypotheses."

question = "Example Hot Test: The experiment had an auger speed of 5. Example Answer: 5" \
           "Example Hot Test: The experiment doesn't mention the auger speed. Example Answer: N/A" \
           "Example Hot Test: "

answers = []
counter = 0
for hot_test in excel_gen:
    prompt = f"{context} + {question} + {hot_test}. Example Answer: "
    gpt_response = gpt(role, prompt)
    answers.append(gpt_response)
    print(counter)
    if counter % 2 == 0:
        time.sleep(60)
    print(gpt_response)
    counter += 1
print("done with GPT")
print(answers)
workbook = load_workbook('/Users/zihaowang/PycharmProjects/Takachar/Takachar-GPT/Hot_Tests.xlsx')
worksheet = workbook['Sheet1']

for i in range(len(answers)):
    cell = f"F{i+2}"
    worksheet[cell] = answers[i]

workbook.save('/Users/zihaowang/PycharmProjects/Takachar/Takachar-GPT/Hot_Tests.xlsx')
print("done with everything")

# ['N/A', 'Based on the provided information, the experiment was conducted to compare the behaviors of the reactor with the Indian MiniTorr v2, specifically in conveying coconut shells and rice husks at a 45-degree angle. The hypothesis was that the difference in the cross-sectional area of the reactor between the Indian and Californian reactors may have contributed to the difficulties observed.\n\nDuring the experiment, only rice husks were tested, and the auger speed was initially set to 6 and later increased to 8. The primary blowers were adjusted from 4000 to 3000, while the secondary blowers remained at 5000. The results showed that coconut shells did not convey well, possibly due to deformed auger blades. Rice husks, on the other hand, conveyed smoothly without getting stuck.\n\nObservations from Gabriella indicated that the initial igniting process was challenging, but it was eventually successful by starting the fire with wood chips and using lighter fluid, a propane torch, and a bernzomatic torch. Smoke escaped through the hopper and cracks in the system, and there was a need to continuously replenish rice hulls to maintain oxygen cutoff at the entrance of the hopper. Bridging occurred, leading to excess white smoke and a pale-yellow color in the hopper.\n\nFlames were observed coming from the cracks in the hopper, especially where the hopper and combustion chamber meet facing the sky. The blowers were adjusted to decrease the temperature, but flames started coming out of the system cracks. When the blowers were raised back to their original settings, the flames eventually went out. The flame became strong once steady state was reached, and the char appeared homogenized at the end of the run.\n\nHowever, complications arose due to the fire running too hot, causing flames to jump out of a port and catch fire to the wires of Blower D. The entire system shut down, and the damaged blower was unplugged. The remaining blowers and the auger were still functional, allowing the remaining char to be conveyed out.\n\nThe output feedrate during the post-test conveyance was approximately 2.2 kg/h at 6 RPM and 5.7 kg/h at 8 RPM, resulting in yields of 13% and 34%, respectively.\n\nThe next steps include replacing Blower D and continuing to run hot tests with the remaining three blowers in place.\n\nIn summary, the experiment aimed to compare the behaviors of the reactor with different cross-sectional areas and test the conveying capabilities of coconut shells and rice husks. The results showed difficulties in conveying coconut shells and successful conveying of rice husks. The experiment also experienced challenges with the igniting process, smoke escaping through cracks, and flames coming out of the system cracks.', 'The auger speed for this hot test is not mentioned in the provided information.', 'The auger speed for Hot Test #64 was initially set at 6 RPM, then increased to 10 RPM, and finally lowered back to 6 RPM when the motor started struggling.', "The example hot test described in the provided information is Hot Test #65 conducted on 4/5/22. The objective of this test was to repeat Hot Test #64 but with the primary blower positioned at the lowest possible position, right at the rectangular-circular transition (at B4 and B6). The hypothesis was that by starting the hot zone earlier, there would be no compression at the rectangular-circular transition, resulting in a smoother running process.\n\nThe results of the test indicated that the test ran more smoothly and achieved a steady state. Opening the NPT ports at the lower sections did not extend the reaction downwards significantly, but the rice husks were not as tightly packed as in the previous test. This suggests that cutting primary air inlets closer to the L-junction could be a potential solution for the Indian MiniTorr.\n\nOther observations from the test include an input feedrate of 10.3 kg/h and well-charred biochar, possibly slightly overcharred due to the longer effective reaction length with the primary air positioned low.\n\nJohn's observations mentioned that the primary fuel used was rice hulls, but a half bucket of wood chips was added to facilitate the lighting process. The goal of the test was to assess the impact of the new blower position on reducing jamming and compression at the square to circle transition section. The test went well, with no jamming observed. The reactor reached a steady state, although the test had to be stopped before that point. There was minimal visible smoke throughout the test, and the ash production varied from heavier to almost none. The flow rate was lower than usual due to stopping the auger to observe the fire at different positions in the reactor body.\n\nThe next steps mentioned in the test report include obtaining chopped rice straws or other straws to repeat the experiments and unlocking the stuck NPT ports at the middle positions (B7 and B9) to find a happy medium. The charring at the end of the test will be closely monitored to determine if it resembles the homogeneous charring observed with the primary air positioned low or the uneven charring observed with the primary air positioned high.\n\nUnfortunately, the provided information does not include any details about the thermocouple history.", "Based on the provided information, it seems that the objective of the experiment is to understand the combustion process and machine design for biomass to biochar formation in a small-sized reactor. The experiment involves inputting biomass into the reactor using an auger, burning the biomass in the presence of oxygen, and measuring temperature at different places using thermocouples. The primary blowers provide air (oxygen) to the reactor zone, while the secondary blowers remove volatiles through the chimney.\n\nIn the specific hot test described (Hot Test #66 - 4/7/22), the objective was to find a happy medium between previous tests by adjusting the primary air blower position. The researchers wanted to observe the extent of charring at the end of the process and compare it to previous tests where the primary air blower position was either too high or too low. Two tests were conducted, but both eventually died. In the first test, the reactor ran hot initially, but smoke started emerging from cracks near the rectangular-circular transition, leading to a tapering off and dying of the reaction. In the second test, the reaction also tapered off, and the rectangular-circular transition became jam-packed.\n\nThe interpretation of the results suggests that in the previous tests, the reaction was either too high in the reactor or already happening in the rectangular-circular transition. In the awkward medium test (Test #66), the primary air blower position was close enough to the rectangular-circular transition to initiate some reaction, but not sufficient to volumetrically reduce the rice husks, resulting in them getting stuck. This led to a vicious downward spiral where the packed rice husks became harder to react, cooling the reaction further.\n\nThe next steps proposed include repeating Test #66 with the leaks plugged up to address the issue of smoke limiting the ability to increase the primary blower RPM. Additionally, it is suggested to repeat Test #65 to further investigate the reaction's behavior over a longer time period.\n\nBased on this information, it appears that the researchers are trying to optimize the combustion process and machine design by adjusting the primary air blower position and addressing issues such as smoke and jam-packed rice husks.", 'The auger speed for this hot test is not mentioned in the provided information.', 'Based on the provided information, the auger speed for the hot test was not mentioned. Therefore, the answer would be N/A (not applicable).', 'Based on the provided information, the example answer for the hot test is as follows:\n\nThe auger speed used in this experiment was not mentioned.', 'Example Answer: The auger speed for this hot test was 6.', 'The auger speed for this hot test is not mentioned in the provided information.', 'Based on the provided information, it seems that the experiment conducted in Hot Test #72 on 4/26/22 had some unexpected outcomes and observations. The experiment aimed to observe any differences in biomass conveyance when the circular cross section of the reactor was replaced with a rectangular cross section, while keeping the primary air at the same location. The hypothesis was that by relaxing the auger-inner wall constrictions, the biomass (hay) would not get stuck.\n\nThe settings for this experiment were a primary air flow rate of 1500 and a secondary air flow rate of 2500. The outcome of the experiment revealed that there were no significant conveyance issues, but there were shudders and signs of friction. The breaker did not blow, and the chimney generally emitted little smoke or ash. However, there was a lot of smoke coming out of cracks and intermittently from the hopper. Inside the reactor, it was very smoky, and substantial flames were observed coming out of the cracks below and above the chimney connector piece. The damper was removed, but it seemed to be acting as if it was still present.\n\nUpon inspection, it was found that the chimney might have been blocked by charred rice straw, which was easily dislodged. "Furry formations" were observed stuck on the inner wall of the oil drum, indicating that the rice straw char was light and easily aerated. The mesh at the top of the chimney was also found to have some char lodged between the wires, but not many wires were clogged. However, there was an accumulation of fine char dust in the chimney elbow, particularly at the secondary blower outlets. The secondary blowers were clogged by mostly uncharred straw, which may have affected their P-Q profile. The primary blowers were also clogged, but to a lesser extent. The side NPT ports (S8) were filled with char dust, more so on the IFM side than the opposite side.\n\nThe next step in the experiment is to remove the chimney mesh and conduct the same hot test to investigate if the clogged chimney mesh caused the smoke from the hopper.\n\nUnfortunately, the provided information does not include any details about the thermocouple history, so an example answer cannot be provided for that.', 'Based on the provided information, the experiment involved testing the combustion process and machine design in a small-sized reactor for biomass to biochar formation. The experiment focused on a specific hot test (#73) conducted on 4/27/22, with personnel Austin and Kevin. The hypothesis for this test was that the clogged chimney mesh caused the hopper smoke, so the chimney mesh was removed, and the same hot test was conducted. The primary blowers were positioned at the topmost positions (B10/B12), and the reactor profile was rectangular.\n\nThe settings for this test were as follows: Primary blower speed - 2500, Secondary blower speed - 2000, and Auger speed - 10. The experiment started with 1.5 bucketfuls of eucalyptus wood chips, which were packed more tightly manually. The flames were quickly established after starting the blowers at high speed (4000/2000) and starting the auger at 6 rpm. Straw was fed into the reactor by hand, resulting in small fires in the hopper. The auger speed was increased to 10 to move the fire up into the reactor, which reduced the hopper fires to a manageable level. The straw had to be continuously pushed into the auger to keep it full and prevent hopper fires.\n\nThe average feed rate during the experiment was approximately 27 kg/h. When the char outlet was opened at the end of the experiment, no smoke was observed, and the straws appeared evenly charred. The next steps mentioned in the experiment plan to install a mega chimney and test it with rice hulls to assess its effectiveness in reducing ash and charred particles coming out of the chimney.\n\nUnfortunately, the provided information does not include any data or specific measurements from the thermocouples.', 'The auger speed for the hot test #74 was 6 rpm.', 'The thermocouple history is not provided in the given information.', 'Based on the provided information, the thermocouple history is not mentioned in the experiment report. Therefore, there is no specific data available regarding the temperature measurements at different places in the reactor during the hot test.', ('Error:', 502, '{"error":{"code":502,"message":"Bad gateway.","param":null,"type":"cf_bad_gateway"}}'), 'Based on the provided information, it seems that the experiment involved testing the combustion process and machine design for biomass to biochar formation in a small-sized reactor. The experiment specifically focused on running a hot test using rice straw as the biomass, with the reactor set at a 30° configuration.\n\nThe settings of the experiment included primary blowers set at 3000, secondary blowers set at 4000, and the auger rotating at 10 rpm. The reactor exit was connected to a black bag, and a large chimney was used. The weather conditions during the test were described as partly cloudy, very windy, and chilly.\n\nThe outcome of the test indicated that approximately 2kg of char was achieved, but steady state was not reached. There was uncertainty about whether the char obtained was from a previous test. Several notable observations were made during the test, including the presence of yellowish smoke coming out of the chimney and cracks of the reactor, ash particles visible from the top of the chimney, and the auger jamming and flipping the breaker switch. Additionally, a hopper fire occurred during the test.\n\nTo address the issues encountered in this test, the next step proposed is to start the test with an established fire using wood chips instead of rice straw. It is suggested that wood chips may provide a more sustainable heat source compared to the quickly burning straw.\n\nThe provided information does not include any specific data from the thermocouples. If there is any thermocouple data available, it would be helpful to analyze it to gain further insights into the temperature profiles and behavior during the test.', 'Based on the provided information, it seems that the experiment involved testing the combustion of biomass (specifically rice straw) in a newly designed small-sized reactor. The reactor was set at a 30° configuration, and woodchips were used to ignite the biomass. The primary blowers provided air (oxygen) to the reactor zone, while the secondary blowers removed volatiles through the chimney.\n\nDuring the experiment, approximately 0.9kg of char was achieved, but steady state was not reached. Most of the char was from the woodchips, although there was also a good amount of straw char. The test had to be stopped due to hopper fires caused by insufficient packing of the rice straw, allowing oxygen to flow into the hopper and ignite the flame. Minimal ash and smoke were observed coming from the chimney.\n\nThe reactor maintained a temperature of around 240°F, but the test could not be sustained. The hopper caught fire twice, indicating the need for better packing of the biomass to prevent oxygen ingress. The char produced appeared to be well done.\n\nThe next steps suggested include continuously packing the rice straw in order to prevent hopper fires caused by oxygen ingress. It is also mentioned that thermocouple data was collected, but the details of the thermocouple history are not provided.\n\nIf you have any specific questions or require further analysis of the experiment, please let me know.', 'The thermocouple history is not provided in the given information.', 'Auger speed: 10 rpm', 'The thermocouple history is not provided in the given information.', 'The auger speed for the hot test was 6 rpm.', 'The auger speed for this hot test was 6.', 'The auger speed for the hot test #85 was 6.', 'Based on the information provided, it seems that the main issue in this hot test was the jamming of the auger. The auger flights, particularly on the left side, were packed tightly and caused the auger to stop running multiple times during the test. This resulted in a failure of the experiment, as the auger was unable to run continuously.\n\nAdditionally, yellow smoke was observed emitting from cracks in the reactor, indicating incomplete combustion. The reactor fire also had difficulty being maintained at certain points during the test. Practically no biochar was collected, with only ash being obtained at the end.\n\nThe auger itself was found to be significantly warped, with a large gap between the new auger and the welded piece on the top auger. This suggests that auger warping occurs more quickly than anticipated.\n\nTo address these issues, the most important next step would be to fix the gap between the auger flights. This could potentially be achieved by adjusting the design or materials used for the auger. It may also be beneficial to test different biomass feedstocks to assess the impact of the gap on the overall performance.\n\nAdditionally, further investigation into the causes of the jamming and incomplete combustion should be conducted. This could involve analyzing the properties of the biomass, such as size, moisture content, and composition, as well as examining the airflow and temperature distribution within the reactor.\n\nOverall, the next steps should focus on improving the design and operation of the auger system to ensure continuous and efficient biomass combustion, as well as addressing the issues related to reactor performance and biochar production.', 'The auger speed for this hot test was 6.', 'Based on the provided information, here is an example answer:\n\nThe experiment conducted on July 16, 2022, aimed to test the hypothesis that moving the primary blower position down two notches (from B10/B12 to B4/B6) would resolve the issue of wood chip jamming. The feedstock used was wood chips collected from the City of Berkeley.\n\nThe results of the experiment showed that the conveyance of wood chips was initially very slow, and the auger had to be stopped multiple times for the reaction to catch up. White smoke started emerging from the chimney, accompanied by the loss of a visible flame. Eventually, after approximately 1.5 hours, the charred wood chips started piling up below the chimney section, leading to more frequent motor tripping. This accumulation of wood chips caused the channels for air flow to be blocked, resulting in more backflow through the hopper. The thermocouple readouts were also observed to be anemic throughout the process.\n\nThe output flow rate of biochar was approximately 7.5 kg/h, resulting in an average yield of 15%. It was noted that parts of the char output were not fully charred. The input flow rate of wood chips was around 50 kg/h, which slowed down over time.\n\nOther observations included the absence of hot embers sliding down to the hopper region during the hopper fire and the minimal emission of ashes from the chimney. The reaction zone initially aimed to be halfway through S4 but advanced closer to the base of the chimney as the test progressed. Hot gases were observed flowing in two directions through the S6 port at the chimney, indicating that the reaction persisted beyond the chimney region.\n\nDuring the first half of the test, only one secondary blower was operational due to command issues with the other blower (blower C). However, the connections of blower C were replaced, and it was put back into service for the latter half of the test.\n\nThe next steps suggested in the experiment report include testing a more flowable material (e.g., rice hulls) to determine if the accumulation problem persists, lowering the reactor angle to 15 degrees to prevent char from falling backward, considering the impact of the auger design on wood chip compression, and repositioning the primary blowers to a higher circumferential position to address potential flow constriction issues.\n\nPlease note that this is just an example answer based on the provided information, and further analysis and investigation may be required to fully understand the combustion process and machine design.', 'Based on the provided information, here is an example answer:\n\nThe experiment conducted in Hot Test #89 aimed to resolve the issue of wood chip jamming by moving the primary blower circumferentially up. The primary blower position was moved from B4/B6 to S4. However, the desired positions of S8 or S9 could not be achieved due to stuck NPT ports. The auger motor was set at 6 RPM with a 50% duty cycle in the latter half of the test. The primary air was initially set higher and gradually reduced to 2000 RPM, while the secondary air was gradually increased to 7000 RPM. The inclination of the reactor was set at 30 degrees.\n\nThe feedstock used in this test was wood chips collected from the City of Berkeley. Throughout the experiment, the reaction conditions were adjusted to control the temperature and smoke production. Initially, the reaction ran cold with high accumulation below the chimney, consisting of charred and uncharred wood. The biomass had to be repeatedly lit, and thick smoke was observed from both the chimney and the hopper. It appeared that the reaction was primarily occurring underneath the chimney, resembling the primary reaction zone rather than the secondary combustion chamber. However, the auger did not jam or trip during the test.\n\nTo improve the reaction conditions, the auger speed was reduced by running the motor at 6 RPM for 50% of the time. This led to a hotter and less smoky steady state, where the accumulation problem below the chimney was resolved. The smoke in the chimney cleared off, indicating a hotter secondary reaction zone. The feedstock in this zone was well-charred, and the level of biomass reduced to or below the auger flight level. The hopper smoke also improved by diligently filling the voids and eliminating any smoking. Towards the end of the test, the hopper was filled to full height, further reducing hopper smoke.\n\nThe experiment also highlighted some potential factors contributing to hopper smoke, such as the position of the primary blower. It was suggested that moving the primary blower circumferentially one notch down, to positions like S8, S9, or S10, could be tested in the future. The variable pitch auger was also considered as a possible cause of the accumulation problem, but it was observed that the reduction in biomass volume below the chimney allowed sufficient space for primary air to escape into the chimney.\n\nThe feedrates and yields were analyzed for the faster and slower sections of the test. In the faster section, the char output was approximately 28.7 kg/h, and the biomass feed was around 96.1 kg/h, resulting in a yield of 29.8%. In the slower section, the char output was about 29.1 kg/h, and the biomass feed was approximately 71.8 kg/h, giving a yield of 41%. The quality of the char showed slight inhomogeneity, possibly due to the position of the primary blower.\n\nBased on the observations and results of this experiment, it was concluded that the hypothesis of wood chip jamming being resolved by moving the primary blower circumferentially up was supported. However, further validation is recommended by repeating a previous hot test that resulted in biomass accumulation below the chimney and observing the slanted pipe leading from the primary blower to the reactor input. Additionally, testing with rice husks and exploring the minimum flow rate needed to maintain the reaction despite blockage of the NPT tube were suggested as future directions for investigation.', 'The experiment had an auger speed of 6 rpm.', "Based on the provided information, it seems that the experiment is focused on biomass combustion (pyrolysis) in the presence of oxygen to produce biochar. The experiment involves a small-sized reactor with a hopper for biomass input, an auger for biomass transportation, and thermocouples to measure temperature at different locations. Primary blowers provide air (oxygen) to the reactor zone, while secondary blowers remove volatiles through a chimney.\n\nThe objective of the experiment described is to achieve uniform charring and prevent auger tripping. The hypothesis being tested is that a lower rpm (duty cycle) of the auger will increase residence times and lead to more even charring. The experiment also mentions a constraint related to the smoke coming out of the hopper, which is not being addressed due to time constraints.\n\nThe initial parameters for the experiment include an auger speed of 6 rpm with a 50% duty cycle, primary air blower at 3000 rpm, secondary air blowers at 4000 rpm, and an angle of inclination of 30 degrees. The experiment reports that char did not accumulate in the chimney as much as in previous tests, resulting in the auger not tripping. Evenly charred output was achieved, but there was consistent smoke from the hopper due to the char falling back due to the reactor's angle of inclination. Chimney emissions were mostly clean, but there was consistent ember emission, possibly due to a higher pile of char under the chimney. The experiment also mentions negative pressure in the chimney as desired.\n\nThe take-away from the experiment is that a lower duty cycle of the auger solves the issues of uneven charring and char accumulation in the chimney, as it reduces the rate at which biomass is drawn into the system. The experiment suggests investigating the effects of reducing the angle of inclination to 15 degrees to address chimney build-up, auger jamming, and hopper smoke. Additionally, the experiment proposes exploring the impact of increasing primary air from 3000 rpm to a higher value for a duty cycle greater than 50% to achieve more severe and even charring. Another pathway of investigation mentioned is bringing the primary air back towards the hopper to increase hot region residence time and devolatilize the biomass more before it reaches the chimney.\n\nLastly, the experiment mentions difficulties in opening stuck NPT couplings (S9 and S8) even with longer wrenches.\n\nBased on this information, it appears that the experiment is well-designed and provides valuable insights into the combustion process and machine design for biomass to biochar conversion. Further investigations and adjustments to the experimental parameters can help optimize the process and address the observed issues.", 'The experiment conducted on July 21, 2022, aimed to achieve uniform charring and prevent auger tripping during the biomass to biochar combustion process. The hypothesis tested was that increasing the primary blower rpm from 3000 to 6000 while keeping the auger at 100% duty cycle at 6 rpm would lead to even charring.\n\nThe initially selected parameters were as follows: Auger speed - 6 rpm (100% duty cycle with a 12-inch pitch auger), primary air blower rpm - 6000, secondary air blower rpm - 4000, and angle of inclination - 30 degrees. The primary air blower was positioned at S10, and the secondary air blowers were positioned at T3 and T5.\n\nThe high-level summary of the experiment includes the following observations:\n\n1. Char did not accumulate in the chimney to the same extent as in previous tests, and the auger did not trip at all. A strong flame was observed within the chimney throughout the test.\n\n2. Evenly charred output was achieved, which appeared to be more homogeneous compared to a previous test conducted on July 20, 2022, where the auger speed was reduced to 50% duty cycle.\n\n3. Smoke from the hopper was reduced by piling the biomass higher.\n\n4. Chimney emissions were mostly clean, but consistent ember emission was observed. This could be due to the higher pile of char under the chimney, which is then blown off directly by the secondary air blowers. The ember emission did not significantly decrease even after reducing the secondary air blower rpm to 4000.\n\n5. Negative pressure was observed in the chimney as desired.\n\nThe key takeaway from this experiment is that a higher primary air value solves the issues of uneven charring, char accumulation in the chimney, and auger motor tripping.\n\nThe suggested pathways of investigation for further experiments are as follows:\n\n1. Test whether reducing the angle of inclination to 15 degrees addresses the issues of chimney build-up, auger jamming, and hopper smoke.\n\n2. Investigate whether bringing the primary air back towards the hopper (at the same circumferential height) increases the hot region residence time and devolatilizes the biomass more before it reaches the chimney. This may help in volumetric reduction of biomass prior to reaching the chimney. This investigation should be done once the stuck NPT couplings (S9 and S8) are detached.\n\nIt is noted that the NPT couplings (S9 and S8) were unable to be opened even with longer wrenches.\n\nLastly, it is mentioned that the rice husks have been completely utilized in this experiment.', "The experiment conducted in this hot test had a hypothesis that a hopper with a larger lower opening would eliminate bridging. However, the experiment encountered some issues. The reactor jammed during the lighting phase and could not be unjammed. There was also an unusual occurrence where the breaker would trip and stop the motor, but without flipping to the 'off' position. Restarting the motor by switching the breaker off and back on only resulted in it running for a short time before jamming again. Additionally, there was a high pitched whine before the motor stopped, indicating possible overload. On the positive side, there was no bridging in the new hopper, although it was not filled very full.\n\nThe next steps would be to investigate why the breaker is not tripping fully and to determine if the interference between the auger and the body can be fixed.", 'Based on the provided information, here are some observations and potential areas for further investigation:\n\n1. Bridging issue: Despite enlarging the hopper, the bridging issue still persists. It is suggested to lower the hopper temperature to 15 degrees and observe if bridging improves. This could help determine if temperature plays a role in the bridging phenomenon.\n\n2. Auger jamming: Initially, jamming occurred after the reactor was lit for a while. It is important to investigate the cause of jamming, which could be occurring higher up in the reactor zone, possibly at the transition above the chimney. Visual inspection and further analysis of the reactor design in this area may provide insights into the jamming issue.\n\n3. Hopper smoke/fire: The fire from the S4-S10 region propagated downwards towards the hopper, causing the biomass at the hopper base to light on fire and/or start smoking. Adjusting the primary/secondary air flow rates seemed to help with smoke mitigation, but the issue returned when the blower RPM was increased. Further investigation is needed to understand the dynamics of the hopper smoke/fire issue and its relationship with the solid level at the chimney position.\n\n4. Output rate and mass yield: The output rate of 33 kg/h implies a mass yield of 80%, which seems incorrect. It is recommended to double-check the output rate measurement and investigate the wavy feature observed in the scale logging. This could indicate a potential issue with the scale or measurement system.\n\n5. Char quality: The obtained char showed variations in charring levels, with some parts undercharred (brownish) at around 60-80% charred. It would be beneficial to investigate the factors influencing char quality, such as residence time, temperature distribution, and feedstock characteristics. This could help optimize the process parameters for consistent and desired char quality.\n\nOverall, further experimentation and analysis are needed to address the observed issues and gain a complete understanding of the combustion process and machine design.', 'The auger speed for this hot test is not mentioned in the provided information.', 'The auger speed for this hot test is not mentioned in the provided information.', 'Based on the provided information, it seems that the hot test experiment was generally successful, with the exception of some issues with wood chips going back to the hopper and a fire in the hopper that caused the test to end prematurely. The observations indicate that the flames inside the reactor were good throughout the test, but no steady state was achieved. The biochar produced was recorded as 12 kg and appeared to be well charred.\n\nBased on these observations, some suggestions for future experiments could be:\n\n1. Start moving the auger more quickly after lighting the fire to ensure a continuous flow of biomass through the reactor.\n2. Consider reducing the primary air (oxygen) supply, as the biomass used was very dry and may not require as much oxygen for combustion.\n3. Ensure that the hopper is filled adequately to avoid low chip levels and potential air holes that could cause the reaction to move backward.\n4. Reduce the angle of the prototype setup to help the reaction move forward more efficiently.\n5. Investigate the impact of lowering the speed of the blower on the final result of biochar production.\n\nBy implementing these suggestions and conducting further experiments, it will be possible to gain a better understanding of the combustion process and optimize the machine design for biomass to biochar formation.', 'Based on the observations and suggestions provided, here are some possible explanations and recommendations:\n\nObservations:\n1. Black smoke in the chimney and periodic appearance of smoke in the hopper.\n2. Flow of chips that end up not being charred (mixing problem).\n3. No complete char achieved, indicating incomplete combustion.\n4. No steady state achieved with the parameters.\n\nPossible Explanations:\n1. The reduced lighting time and primary blower speed may have resulted in insufficient oxygen supply, leading to incomplete combustion and the formation of black smoke.\n2. The mixing problem may be due to inadequate agitation or uneven distribution of biomass in the reactor.\n\nRecommendations:\n1. Analyze possible scenarios and conduct further experiments to find a balance between temperature, smoke production, and char formation.\n2. Consider adjusting the position of the blowers to improve air distribution and ensure sufficient oxygen supply.\n3. Decrease the angle of the prototype to enhance mixing and biomass distribution.\n4. Increase the speed of the secondary blowers to promote secondary combustion and improve overall combustion efficiency.\n\nThese recommendations aim to address the observed issues and optimize the combustion process for biomass to biochar formation. Further experimentation and analysis will be necessary to validate these suggestions and achieve the desired outcomes.', 'Based on the provided information, it seems that the experiment was conducted to address issues related to black smoke and white smoke during the biomass combustion process. The experiment involved adjusting the position of the secondary air blowers and the primary blower, as well as using a newly refurbished six-inch pitch auger and a prototype setup at a 35-degree angle.\n\nThe experiment observed that the reactor ran very hot throughout, and white ash was visible against the blue sky, indicating a potentially worse outcome compared to previous tests. Puffs of black smoke were occasionally seen from the chimney, leading to a gradual reduction in primary air. However, it was noted that the primary and secondary air blowers were switched on the right-hand side, resulting in an inconclusive outcome. White smoke was still observed near the hopper, and it was suspected that frequent poking into the hopper may have helped reduce the smoke.\n\nDetailed observations mentioned that some parts of the wood chip pile were more wet, especially inside.\n\nFlow rates were measured, and two different calculations of mass yield were obtained. One calculation based on cumulative output and input mass yielded a mass yield of about 28%, while another calculation based on output and input mass flow rates yielded a mass yield of about 12%. It was also mentioned that the output mass scale exhibited strange undulating behavior, raising doubts about the accuracy of the readout for the output mass flow.\n\nUnfortunately, the provided information does not include any specific question or hypothesis to address. If you have any specific questions or hypotheses related to this experiment, please let me know, and I will be happy to assist you further.', 'Based on the provided information, it seems that the objective of the experiment is to understand the combustion process and machine design for biomass to biochar formation. The experiment involves a small-sized reactor with a hopper for biomass input, an auger for biomass transportation, primary and secondary blowers for oxygen supply and volatile removal, and thermocouples for temperature measurement.\n\nIn the example hot test, the auger speed was set at 5. However, in another hot test, the auger speed was not mentioned. The hypothesis for the hot test was to correct the wiring for primary/secondary blowers and agitate the hopper to run the test smoothly without any smoke.\n\nDuring the hot test, the primary blower positions were adjusted, and the primary and secondary air were initially set at idle. The feedstock used was pine tree wood chips from Anahim Lake, Canada. The test started with a slow start due to the position of lighting up, but after adjusting the primary blower position, the combustion was enhanced. However, black smoke was observed from the chimney periodically. The primary blower speed was then changed to 2500 rpm, which helped reduce the smoke, but white smoke appeared at the hopper. It was found that the white smoke was due to biomass/biochar accumulating below the chimney level, leading to blockage of flow channels. To address this, an interval system of running the auger and blowers for a certain period and then stopping them temporarily was implemented. The interval system was adjusted to cool down the process, and a total of 27.45 kg of biochar was recorded.\n\nBased on the observations, suggestions for achieving a steady hot test include working as a team with specific roles, implementing the interval system, poking the hopper to avoid bridging, and aiming for a steady-state temperature for fully charred biochar. The goal is to minimize black and white smoke throughout the test.\n\nIn summary, the experiment aims to understand the combustion process and machine design for biomass to biochar formation. The example hot test provided insights into the adjustments made to the blower positions, air supply, and interval system to improve the combustion process and minimize smoke.', 'The average interval for running the auger without getting smoke and issues is 10.5 minutes with a standard deviation of 2.12. The average interval for stopping the auger for an interval of 3 minutes with a standard deviation of 2.82.\n\nTo plot these intervals, you can create a bar chart or a histogram. The x-axis will represent the intervals and the y-axis will represent the frequency or count of each interval. This will give you a visual representation of the distribution of start/stop intervals.\n\nRegarding the hypothesis on the impact of hopper-poking on white smoke from the hopper, it seems that the initial hypothesis of increasing voidage causing white smoke may not be accurate. The newer observation suggests that the white smoke may be due to blockage of the flow path below the chimney. To test this hypothesis, you can stop hopper-poking and observe the difference in hopper white smoke. This can be measured by analyzing the statistics of auger on and auger off time intervals.', 'The auger speed for this hot test is not mentioned in the provided information.', 'The auger speed for this hot test is not mentioned in the provided information.', "Based on the observations and data from the hot test, it is suggested to run the demo with the following settings:\n\n- Primary blowers at 2,200 rpm\n- Secondary blowers at 3,000 rpm\n- Aluminum tape covering any possible airholes\n- Input feed rate of 110.2 kg\n\nThis setup seemed to operate smoothly with minor smoke and resulted in reasonably consistent char. However, when the primary blowers were reduced to 1,700 rpm, backflow occurred and the resulting char was less consistent.\n\nFor the demo day on October 10-11, 2022, it is recommended to use the suggested settings as they appear to be most appropriate for the Douglas Fir wood chips from William's Lake. The aim is to find a balance between minimizing smoke in the hopper and obtaining fully charred results.", 'The auger speed for the hot test #105 is not mentioned in the provided information.', 'Based on the provided information, it seems that the experiment is focused on biomass combustion (pyrolysis) in the presence of oxygen to produce biochar. The experiment involves a small-sized reactor with a hopper for biomass input, an auger for biomass transportation, and thermocouples to measure temperature at different locations. Primary blowers supply air (oxygen) to the reactor zone, while secondary blowers remove volatiles through a chimney.\n\nThe objective of the experiment is to gain a comprehensive understanding of the combustion process and machine design by testing different hypotheses. The example hot test mentioned is Hot Test #106, conducted on 10/11/22. The participants involved in the experiment are Camila, Austin, Kanages, Kevin, and Marian.\n\nThe specific hypothesis for Hot Test #106 is the replication of Hot Test #104 for Esket demo day 2. The experimental settings include primary blowers at S5 on the right and S10 on the left. The left-side primary blower was moved from S5 to S10 to investigate if it could mitigate the observed hopper smoke. The primary blower operates at 2200 rpm, while the secondary blower operates at 3000 rpm. A mega chimney was used without any mesh at the top. The experiment utilized a newly refurbished six-inch pitch auger and a prototype at a 35-degree angle setup.\n\nThe feedstock used in this experiment is Douglas Fir wood chips from Williams Lake, Canada. The experiment summary indicates that the test performed well initially, but after 1-2 hours, hopper smoke started to appear. Various attempts were made to mitigate the smoke, including vigorous poking, idling the air/stopping the auger temporarily, and moving the left-side primary blower from S5 to S10. However, these measures did not have a significant effect. The char in the first drum appeared relatively well done.\n\nThe provided information does not include an example answer. If you have any specific questions or require further assistance, please let me know.', 'The auger speed for this hot test was not mentioned in the provided information.', 'The auger speed for this hot test was 6 rpm.', 'Based on the detailed observations provided, it seems that the auger motor experienced an unexpected stoppage during the test, referred to as a "ghost trip" situation. The breaker did not appear to be tripped, and cycling the breaker and re-enabling the motor did not resolve the issue immediately. However, after 10-15 minutes, cycling the breaker once more allowed the auger to start moving again.\n\nOne suggestion to address this problem is to replace the motor breaker. It is possible that the breaker may be worn out and not tripping properly in an overcurrent situation, leading to the motor stopping without the breaker being triggered. By replacing the motor breaker, it can be determined if this solves the "ghost tripping" problem.\n\nIt is important to note that this suggestion is based on the provided information, and a thorough examination of the equipment and further troubleshooting may be necessary to fully understand and resolve the issue.', 'N/A', 'The auger speed for this hot test is not mentioned in the provided information.']